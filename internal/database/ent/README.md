<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# ent

```go
import "github.com/aws-contrib/aurora/internal/database/ent"
```

Package ent provides an extension to the ent package for database operations.

## Index

- [func WithURL\(\) string](<#WithURL>)
- [type Applier](<#Applier>)
- [type ApplyRevisionParams](<#ApplyRevisionParams>)
- [type Batch](<#Batch>)
- [type DBTX](<#DBTX>)
- [type ExecInsertRevisionParams](<#ExecInsertRevisionParams>)
  - [func \(x \*ExecInsertRevisionParams\) SetRevision\(entity \*Revision\)](<#ExecInsertRevisionParams.SetRevision>)
- [type ExecInsertRevisionParamsConverter](<#ExecInsertRevisionParamsConverter>)
- [type ExecInsertRevisionParamsConverterImpl](<#ExecInsertRevisionParamsConverterImpl>)
  - [func \(c \*ExecInsertRevisionParamsConverterImpl\) SetFromRevision\(target \*ExecInsertRevisionParams, source \*Revision\)](<#ExecInsertRevisionParamsConverterImpl.SetFromRevision>)
- [type Gateway](<#Gateway>)
  - [func Open\(ctx context.Context, uri string, options ...GatewayOption\) \(\_ Gateway, err error\)](<#Open>)
- [type GatewayOption](<#GatewayOption>)
- [type GatewayOptionFunc](<#GatewayOptionFunc>)
  - [func \(fn GatewayOptionFunc\) Apply\(cfg \*pgxpool.Config\) error](<#GatewayOptionFunc.Apply>)
- [type GetRevisionParams](<#GetRevisionParams>)
  - [func \(x \*GetRevisionParams\) SetRevision\(entity \*Revision\)](<#GetRevisionParams.SetRevision>)
- [type GetRevisionParamsConverter](<#GetRevisionParamsConverter>)
- [type GetRevisionParamsConverterImpl](<#GetRevisionParamsConverterImpl>)
  - [func \(c \*GetRevisionParamsConverterImpl\) SetFromRevision\(target \*GetRevisionParams, source \*Revision\)](<#GetRevisionParamsConverterImpl.SetFromRevision>)
- [type InsertRevisionParams](<#InsertRevisionParams>)
  - [func \(x \*InsertRevisionParams\) SetRevision\(entity \*Revision\)](<#InsertRevisionParams.SetRevision>)
- [type InsertRevisionParamsConverter](<#InsertRevisionParamsConverter>)
- [type InsertRevisionParamsConverterImpl](<#InsertRevisionParamsConverterImpl>)
  - [func \(c \*InsertRevisionParamsConverterImpl\) SetFromRevision\(target \*InsertRevisionParams, source \*Revision\)](<#InsertRevisionParamsConverterImpl.SetFromRevision>)
- [type ListRevisionsParams](<#ListRevisionsParams>)
- [type Querier](<#Querier>)
- [type QuerierAction](<#QuerierAction>)
  - [func NewQueryPipeline\(collection ...QuerierFunc\) QuerierAction](<#NewQueryPipeline>)
- [type QuerierFunc](<#QuerierFunc>)
  - [func \(fn QuerierFunc\) Run\(querier Querier\) error](<#QuerierFunc.Run>)
- [type Queries](<#Queries>)
  - [func New\(db DBTX\) \*Queries](<#New>)
  - [func \(x \*Queries\) ApplyRevision\(ctx context.Context, params \*ApplyRevisionParams\) error](<#Queries.ApplyRevision>)
  - [func \(x \*Queries\) Close\(\)](<#Queries.Close>)
  - [func \(q \*Queries\) CreateTableRevisions\(ctx context.Context\) error](<#Queries.CreateTableRevisions>)
  - [func \(q \*Queries\) ExecInsertRevision\(ctx context.Context, arg \*ExecInsertRevisionParams\) error](<#Queries.ExecInsertRevision>)
  - [func \(q \*Queries\) GetRevision\(ctx context.Context, arg \*GetRevisionParams\) \(\*Revision, error\)](<#Queries.GetRevision>)
  - [func \(q \*Queries\) InsertRevision\(ctx context.Context, arg \*InsertRevisionParams\) \(\*Revision, error\)](<#Queries.InsertRevision>)
  - [func \(q \*Queries\) ListRevisions\(ctx context.Context, arg \*ListRevisionsParams\) \(\[\]\*Revision, error\)](<#Queries.ListRevisions>)
  - [func \(x \*Queries\) Ping\(ctx context.Context\) error](<#Queries.Ping>)
  - [func \(x \*Queries\) RunInTx\(ctx context.Context, action QuerierAction\) \(err error\)](<#Queries.RunInTx>)
  - [func \(q \*Queries\) WithTx\(tx pgx.Tx\) \*Queries](<#Queries.WithTx>)
- [type Revision](<#Revision>)
  - [func \(x \*Revision\) GetName\(\) string](<#Revision.GetName>)


<a name="WithURL"></a>
## func [WithURL](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L36>)

```go
func WithURL() string
```

WithURL returns the database URL.

<a name="Applier"></a>
## type [Applier](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_ext.go#L14-L16>)



```go
type Applier interface {
    ApplyRevision(ctx context.Context, params *ApplyRevisionParams) error
}
```

<a name="ApplyRevisionParams"></a>
## type [ApplyRevisionParams](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_ext.go#L19-L24>)

ApplyRevisionParams represents the parameters for executing a revision.

```go
type ApplyRevisionParams struct {
    // Revision contains the parameters for executing a revision.
    Revision *Revision
    // FileSystem is the filesystem where the revision files are located.
    FileSystem fs.FS
}
```

<a name="Batch"></a>
## type [Batch](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/querier_ext.go#L35-L38>)

Batch represents a batch of results.

```go
type Batch struct {
    Results pgx.BatchResults
    Total   int
}
```

<a name="DBTX"></a>
## type [DBTX](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_gen.go#L14-L18>)



```go
type DBTX interface {
    Exec(context.Context, string, ...interface{}) (pgconn.CommandTag, error)
    Query(context.Context, string, ...interface{}) (pgx.Rows, error)
    QueryRow(context.Context, string, ...interface{}) pgx.Row
}
```

<a name="ExecInsertRevisionParams"></a>
## type [ExecInsertRevisionParams](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L46-L51>)



```go
type ExecInsertRevisionParams struct {
    ID            string        `db:"id" json:"id"`
    Description   string        `db:"description" json:"description"`
    ExecutedAt    time.Time     `db:"executed_at" json:"executed_at"`
    ExecutionTime time.Duration `db:"execution_time" json:"execution_time"`
}
```

<a name="ExecInsertRevisionParams.SetRevision"></a>
### func \(\*ExecInsertRevisionParams\) [SetRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision_conv_ext.go#L18>)

```go
func (x *ExecInsertRevisionParams) SetRevision(entity *Revision)
```

SetRevision sets the params from the entity.

<a name="ExecInsertRevisionParamsConverter"></a>
## type [ExecInsertRevisionParamsConverter](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision_conv.go#L25-L28>)

goverter:converter goverter:skipCopySameType yes goverter:output:file models\_conv\_gen.go goverter:output:package github.com/aws\-contrib/aurora/internal/database/ent

```go
type ExecInsertRevisionParamsConverter interface {
    // goverter:update target
    SetFromRevision(target *ExecInsertRevisionParams, source *Revision)
}
```

<a name="ExecInsertRevisionParamsConverterImpl"></a>
## type [ExecInsertRevisionParamsConverterImpl](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_conv_gen.go#L6>)



```go
type ExecInsertRevisionParamsConverterImpl struct{}
```

<a name="ExecInsertRevisionParamsConverterImpl.SetFromRevision"></a>
### func \(\*ExecInsertRevisionParamsConverterImpl\) [SetFromRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_conv_gen.go#L8>)

```go
func (c *ExecInsertRevisionParamsConverterImpl) SetFromRevision(target *ExecInsertRevisionParams, source *Revision)
```



<a name="Gateway"></a>
## type [Gateway](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/querier_ext.go#L16-L27>)

Gateway represents the database gateway.

```go
type Gateway interface {
    // inherit from Querier
    Querier
    // inherit from Applier
    Applier
    // RunInTx runs the given function in a transaction.
    RunInTx(context.Context, QuerierAction) error
    // Ping verifies a connection to the database is still alive.
    Ping(context.Context) error
    // Close closes the connection to the database.
    Close()
}
```

<a name="Open"></a>
### func [Open](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L45>)

```go
func Open(ctx context.Context, uri string, options ...GatewayOption) (_ Gateway, err error)
```

Open opens a database connection to the given URL.

<a name="GatewayOption"></a>
## type [GatewayOption](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L20-L23>)

GatewayOption represents a gateway option.

```go
type GatewayOption interface {
    // Apply applies the configuration.
    Apply(*pgxpool.Config) error
}
```

<a name="GatewayOptionFunc"></a>
## type [GatewayOptionFunc](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L28>)

GatewayOptionFunc is a function that applies a GatewayOption.

```go
type GatewayOptionFunc func(*pgxpool.Config) error
```

<a name="GatewayOptionFunc.Apply"></a>
### func \(GatewayOptionFunc\) [Apply](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L31>)

```go
func (fn GatewayOptionFunc) Apply(cfg *pgxpool.Config) error
```

Apply applies the GatewayOptionFunc to the Gateway.

<a name="GetRevisionParams"></a>
## type [GetRevisionParams](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L76-L78>)



```go
type GetRevisionParams struct {
    ID string `db:"id" json:"id"`
}
```

<a name="GetRevisionParams.SetRevision"></a>
### func \(\*GetRevisionParams\) [SetRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision_conv_ext.go#L6>)

```go
func (x *GetRevisionParams) SetRevision(entity *Revision)
```

SetRevision sets the params from the entity.

<a name="GetRevisionParamsConverter"></a>
## type [GetRevisionParamsConverter](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision_conv.go#L7-L10>)

goverter:converter goverter:skipCopySameType yes goverter:output:file models\_conv\_gen.go goverter:output:package github.com/aws\-contrib/aurora/internal/database/ent

```go
type GetRevisionParamsConverter interface {
    // goverter:update target
    SetFromRevision(target *GetRevisionParams, source *Revision)
}
```

<a name="GetRevisionParamsConverterImpl"></a>
## type [GetRevisionParamsConverterImpl](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_conv_gen.go#L17>)



```go
type GetRevisionParamsConverterImpl struct{}
```

<a name="GetRevisionParamsConverterImpl.SetFromRevision"></a>
### func \(\*GetRevisionParamsConverterImpl\) [SetFromRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_conv_gen.go#L19>)

```go
func (c *GetRevisionParamsConverterImpl) SetFromRevision(target *GetRevisionParams, source *Revision)
```



<a name="InsertRevisionParams"></a>
## type [InsertRevisionParams](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L108-L113>)



```go
type InsertRevisionParams struct {
    ID            string        `db:"id" json:"id"`
    Description   string        `db:"description" json:"description"`
    ExecutedAt    time.Time     `db:"executed_at" json:"executed_at"`
    ExecutionTime time.Duration `db:"execution_time" json:"execution_time"`
}
```

<a name="InsertRevisionParams.SetRevision"></a>
### func \(\*InsertRevisionParams\) [SetRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision_conv_ext.go#L12>)

```go
func (x *InsertRevisionParams) SetRevision(entity *Revision)
```

SetRevision sets the params from the entity.

<a name="InsertRevisionParamsConverter"></a>
## type [InsertRevisionParamsConverter](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision_conv.go#L16-L19>)

goverter:converter goverter:skipCopySameType yes goverter:output:file models\_conv\_gen.go goverter:output:package github.com/aws\-contrib/aurora/internal/database/ent

```go
type InsertRevisionParamsConverter interface {
    // goverter:update target
    SetFromRevision(target *InsertRevisionParams, source *Revision)
}
```

<a name="InsertRevisionParamsConverterImpl"></a>
## type [InsertRevisionParamsConverterImpl](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_conv_gen.go#L25>)



```go
type InsertRevisionParamsConverterImpl struct{}
```

<a name="InsertRevisionParamsConverterImpl.SetFromRevision"></a>
### func \(\*InsertRevisionParamsConverterImpl\) [SetFromRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_conv_gen.go#L27>)

```go
func (c *InsertRevisionParamsConverterImpl) SetFromRevision(target *InsertRevisionParams, source *Revision)
```



<a name="ListRevisionsParams"></a>
## type [ListRevisionsParams](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L149-L152>)



```go
type ListRevisionsParams struct {
    PageOffset *int32 `db:"page_offset" json:"page_offset"`
    PageLimit  *int32 `db:"page_limit" json:"page_limit"`
}
```

<a name="Querier"></a>
## type [Querier](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/querier_gen.go#L11-L22>)



```go
type Querier interface {
    // Creates a table named 'aurora_schema_revisions' with the following columns:
    CreateTableRevisions(ctx context.Context) error
    // Inserts a row into the table 'aurora_schema_revisions' with option ':exec'
    ExecInsertRevision(ctx context.Context, arg *ExecInsertRevisionParams) error
    // Retrieves a row from the table 'aurora_schema_revisions' with option ':one'
    GetRevision(ctx context.Context, arg *GetRevisionParams) (*Revision, error)
    // Inserts a row into the table 'aurora_schema_revisions' with option ':one'
    InsertRevision(ctx context.Context, arg *InsertRevisionParams) (*Revision, error)
    // Retrieves a list of rows from the table 'aurora_schema_revisions' with option ':many'
    ListRevisions(ctx context.Context, arg *ListRevisionsParams) ([]*Revision, error)
}
```

<a name="QuerierAction"></a>
## type [QuerierAction](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/querier_ext.go#L41-L44>)

QuerierAction represents a query action.

```go
type QuerierAction interface {
    // Run runs the action.
    Run(Querier) error
}
```

<a name="NewQueryPipeline"></a>
### func [NewQueryPipeline](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/querier_ext.go#L57>)

```go
func NewQueryPipeline(collection ...QuerierFunc) QuerierAction
```

NewQueryPipeline returns a new QuerierFunc that runs the given steps.

<a name="QuerierFunc"></a>
## type [QuerierFunc](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/querier_ext.go#L49>)

QuerierFunc is a function that runs a query.

```go
type QuerierFunc func(Querier) error
```

<a name="QuerierFunc.Run"></a>
### func \(QuerierFunc\) [Run](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/querier_ext.go#L52>)

```go
func (fn QuerierFunc) Run(querier Querier) error
```

Run runs the query.

<a name="Queries"></a>
## type [Queries](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_gen.go#L24-L26>)



```go
type Queries struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_gen.go#L20>)

```go
func New(db DBTX) *Queries
```



<a name="Queries.ApplyRevision"></a>
### func \(\*Queries\) [ApplyRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_ext.go#L27>)

```go
func (x *Queries) ApplyRevision(ctx context.Context, params *ApplyRevisionParams) error
```

ApplyRevision executes a revision.

<a name="Queries.Close"></a>
### func \(\*Queries\) [Close](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L101>)

```go
func (x *Queries) Close()
```

Close closes the connection to the database.

<a name="Queries.CreateTableRevisions"></a>
### func \(\*Queries\) [CreateTableRevisions](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L27>)

```go
func (q *Queries) CreateTableRevisions(ctx context.Context) error
```

Creates a table named 'aurora\_schema\_revisions' with the following columns:

<a name="Queries.ExecInsertRevision"></a>
### func \(\*Queries\) [ExecInsertRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L54>)

```go
func (q *Queries) ExecInsertRevision(ctx context.Context, arg *ExecInsertRevisionParams) error
```

Inserts a row into the table 'aurora\_schema\_revisions' with option ':exec'

<a name="Queries.GetRevision"></a>
### func \(\*Queries\) [GetRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L81>)

```go
func (q *Queries) GetRevision(ctx context.Context, arg *GetRevisionParams) (*Revision, error)
```

Retrieves a row from the table 'aurora\_schema\_revisions' with option ':one'

<a name="Queries.InsertRevision"></a>
### func \(\*Queries\) [InsertRevision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L116>)

```go
func (q *Queries) InsertRevision(ctx context.Context, arg *InsertRevisionParams) (*Revision, error)
```

Inserts a row into the table 'aurora\_schema\_revisions' with option ':one'

<a name="Queries.ListRevisions"></a>
### func \(\*Queries\) [ListRevisions](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/revision.sql_gen.go#L155>)

```go
func (q *Queries) ListRevisions(ctx context.Context, arg *ListRevisionsParams) ([]*Revision, error)
```

Retrieves a list of rows from the table 'aurora\_schema\_revisions' with option ':many'

<a name="Queries.Ping"></a>
### func \(\*Queries\) [Ping](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L91>)

```go
func (x *Queries) Ping(ctx context.Context) error
```

Ping verifies a connection to the database is still alive,

<a name="Queries.RunInTx"></a>
### func \(\*Queries\) [RunInTx](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_ext.go#L69>)

```go
func (x *Queries) RunInTx(ctx context.Context, action QuerierAction) (err error)
```

RunInTx runs the given function in a transaction.

<a name="Queries.WithTx"></a>
### func \(\*Queries\) [WithTx](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/db_gen.go#L28>)

```go
func (q *Queries) WithTx(tx pgx.Tx) *Queries
```



<a name="Revision"></a>
## type [Revision](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_gen.go#L11-L16>)



```go
type Revision struct {
    ID            string        `db:"id" json:"id"`
    Description   string        `db:"description" json:"description"`
    ExecutedAt    time.Time     `db:"executed_at" json:"executed_at"`
    ExecutionTime time.Duration `db:"execution_time" json:"execution_time"`
}
```

<a name="Revision.GetName"></a>
### func \(\*Revision\) [GetName](<https://github.com/aws-contrib/aurora/blob/main/internal/database/ent/models_ext.go#L4>)

```go
func (x *Revision) GetName() string
```

GetName returns the name of the revision file based on its ID and description.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
